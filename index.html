<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Salary Clock</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#121933;
      --text:#eaf0ff;
      --muted:#9fb1d6;
      --accent:#6ea8fe;
      --accent-2:#54d4a0;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f5f7ff;
        --panel:#ffffff;
        --text:#0e1530;
        --muted:#5b6b8d;
        --accent:#3b82f6;
        --accent-2:#10b981;
        --shadow: 0 12px 30px rgba(14,21,48,.12);
      }
    }
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
      background: var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width:800px;
      margin:0 auto;
      padding:40px 20px;
    }
    .title{
      font-weight:700;
      font-size:22px;
      margin-bottom:20px;
      text-align:center;
      color:var(--muted);
    }
    .money{
      text-align:center;
      font-size: clamp(48px, 10vw, 100px);
      font-weight:800;
      text-shadow: 0 2px 4px rgba(0,0,0,.3);
      margin-bottom:20px;
    }
    .bar{
      position:relative;
      height:14px;
      border-radius:999px;
      background:rgba(255,255,255,.1);
      overflow:hidden;
      box-shadow:inset 0 1px 2px rgba(0,0,0,.2);
      margin:20px 0;
    }
    .bar > i{
      position:absolute;
      inset:0 100% 0 0;
      border-radius:999px;
      background:linear-gradient(90deg, var(--accent), var(--accent-2));
      transition:width .6s cubic-bezier(.22,1,.36,1);
    }
    .info{
      display:flex;
      justify-content:space-between;
      font-size:14px;
      color:var(--muted);
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">Earnings so far this month</div>
    <div class="money" id="money">—</div>
    <div class="bar"><i id="barFill"></i></div>
    <div class="info">
      <span id="monthName">—</span>
      <span id="elapsed">—</span>
    </div>
  </div>

  <script>
    const salary = 5000; // 固定月工资

    function fmt(n){
      return new Intl.NumberFormat(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(n);
    }

    function getMonthInfo(d){
      const y = d.getFullYear();
      const m = d.getMonth();
      const days = new Date(y, m+1, 0).getDate();
      const start = new Date(y, m, 1, 0, 0, 0);
      const end   = new Date(y, m, days, 23, 59, 59);
      const totalSeconds = (end - start) / 1000;
      return { days, start, end, totalSeconds };
    }

    function humanElapsed(seconds){
      if (seconds < 0) seconds = 0;
      const d = Math.floor(seconds / 86400);
      const h = Math.floor((seconds % 86400) / 3600);
      const mi = Math.floor((seconds % 3600) / 60);
      const s = Math.floor(seconds % 60);
      const parts = [];
      if (d) parts.push(`${d}d`);
      if (h) parts.push(`${h}h`);
      if (mi) parts.push(`${mi}m`);
      parts.push(`${s}s`);
      return parts.join(" ");
    }

    function update(){
      const now = new Date();
      const { days, start, totalSeconds } = getMonthInfo(now);
      const elapsedSeconds = (now - start) / 1000;
      const progress = Math.min(1, Math.max(0, elapsedSeconds / totalSeconds));

      const earned = salary * progress;
      document.getElementById("money").textContent = "¥" + fmt(earned);
      document.getElementById("barFill").style.width = (progress * 100).toFixed(2) + "%";
      document.getElementById("monthName").textContent = now.toLocaleString(undefined, { month: 'long', year: 'numeric' });
      document.getElementById("elapsed").textContent = `${humanElapsed(elapsedSeconds)} of ${days} days`;
    }

    update();
    setInterval(update, 1000);
  </script>
</body>
</html>
